{% extends 'base_layout.html' %}
{% load crispy_forms_tags %}
{% block content %}


<div class="container">
    <div class="row">
        <div class="col-9" style="border-right:1px solid black;">
            <div class="d-flex justify-content-center"><img src="{{article.thumb.url}}" class="img-fluid" alt="Responsive image"></div>            
                <div style="margin-top: 20px; margin-left: 10px; margin-bottom: 20px; margin-right: 5px;">
                <h2>{{ article.title }}</h2>
                <p class="font-weight-light">By: {{article.author}} </p>  
                <hr>
                <p class="font-weight-normal">{{ article.body }}</p>
                <hr>
                <p class="font-weight-normal">Published: {{ article.date }} </p>  
                
                </div>
            
            <hr>
            {% if request.user == article.author %}
            <div class="d-flex justify-content-around " style="margin-top: 20px; margin-bottom: 20px;">
                <a href=" {% url 'articles:edit' article.pk %} "><button type="button" class="btn btn-primary">Edit</button></a> 
                <a href=" {% url 'articles:delete' article.pk %} "><button type="button" class="btn btn-danger">Delete</button></a>
            </div>
            <hr>
            {% endif %}
            {%  if comments %}
            <div class="d-flex justify-content-around">
              <p class="font-weight-bold">Most Recent Comments</p><p class="font-weight-bold">|</p><p class="font-weight-light">{{comments.count}} comments</p>
            </div>
            {% for comment in comments %}
              <div class="alert alert-primary" role="alert">
                {{comment.content}}
              </div>
              <p class="font-weight-light">By : {{comment.name}} | {{comment.date}}</p>
            {% endfor %}
            {% else %}
            <p class="font-weight-bold">No comments yet!</p>
            {% endif %}
            <hr>
              
            <form class="site-form" action="{% url 'articles:detail' article.pk %}" method="post" enctype="multipart/form-data" style="margin-bottom: 30px;">
              <div class="row align-items-end">
              <div class="col-9">
                {% csrf_token %}
                {{ form|crispy }}</div>
                <div class="col-3"  ><button type="submit" class="btn btn-success btn-sm" style="margin-bottom: 20px;">Comment</button></div></div><hr>
          </form>
        



         </div>

         

         <div class="col-3">
          
            <p class="text-left">Search Something:</p>
                <form method="GET" action= "{% url 'articles:search' %}" >
                    <div class="input-group mb-3">
                      <input type="" name="q" value="{{request.GET.q}}" class="form-control" placeholder="Type Something.." aria-label="Recipient's username" aria-describedby="basic-addon2">
                      <div class="input-group-append">
                        <button type="submit" class="btn btn-primary"><span class="fa fa-search"></span> Search</button>
                      </div>
                    </div>
                 </form>
             <p class="font-italic font-weight-bold">Categories:</p>
              <ul class="list-group list-group-flush" style="margin-bottom: 20px;">
                {% for item in categories %}              
                  <a href="{% url 'articles:category' item.id %}" class="text-decoration-none">
                <li class="list-group-item">{{item}}</li></a>
                {% endfor %}
                
              </ul>
            <p class="font-italic font-weight-bold">Follow me on social media:</p>
            <div class="d-flex justify-content-around">
              <a href="https://www.facebook.com/shishir.mishra.39395" ><i class="fa fa-facebook-square fa-2x" aria-hidden="true" style="color:blue;"></i></a>
              <a href="https://www.instagram.com/mishrashishir3/" ><i style="font-size:30px; margin-right: 20px; color:red;" class="fa">&#xf16d;</i></a>
            </div>
          </div>          
           



     </div>
</div>
{% endblock %}